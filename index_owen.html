<!DOCTYPE html>
<html lang ="en">
<head>
  <title>Satellite Time Comparison</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="please add">
  <!--CSS-->
  <link rel="stylesheet" type='text/css' media='all' href="css/webslides.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
  <link rel="stylesheet" type="text/css" media="all" href="css/style_owen.css">
  <!--JS-->
  <script src="js/webslides.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
</head>
<body>
  <article id="webslides">
    <!--landing-->
    <section>
      <!-- <span class="background" style="background-image:url('img/testing.png')"></span> -->
      <div class="wrap">
        <h1>Testing Page</h1>
      </div>
    </section>
    <!--first map-->
    <section class="fullscreen">
      <div id="mymap"></div>
    </section>

    <!--
    <section class="bg-black">
      <div id="mymap"></div> -->
      <!-- <div class="wrap">
        <button type="button" id="toggle">Layer Toggle</button>
      </div> -->
    <!-- </section> -->
    <!--second map-->
    <section class="bg-black slide-bottom content-left">
      <div id="mymap2"></div>
      <!-- <div class="wrap">
        <button type="button" id="toggle2">Layer Toggle</button>
      </div> -->
    </section>
  </article>
  <script>

  var ws = new WebSlides();

  var map = L.map("mymap", {
    zoomControl: false,
    scrollWheelZoom: false
  }).setView([3.5199, 31.3300], 16);

  var map2 = L.map("mymap2", {
    zoomControl: false,
    scrollWheelZoom: false
  }).setView([3.4667, 31.3743], 15);

  var presentTile = L.tileLayer('https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {maxZoom: 19});
  var pastTile = L.tileLayer('https://wayback.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/WMTS/1.0.0/default028mm/MapServer/tile/29387/{z}/{y}/{x}', {maxZoom: 19});
  pastTile.addTo(map);
  //pastTile.addTo(map2);

  var tog = 0;
  var tog2 = 0;

  // $("#toggle").click(function(){
  //   if(tog == 0){
  //     tog = 1;
  //     map.removeLayer(pastTile);
  //     presentTile.addTo(map);
  //   }else if(tog == 1){
  //     tog = 0;
  //     map.removeLayer(presentTile);
  //     pastTile.addTo(map);
  //   }
  // });
  //
  // $("#toggle2").click(function(){
  //   if(tog2 == 0){
  //     tog2 = 1;
  //     map2.removeLayer(pastTile);
  //     presentTile.addTo(map2);
  //     map.invalidateSize();
  //   }else if(tog2 == 1){
  //     tog2 = 0;
  //     map2.removeLayer(presentTile);
  //     pastTile.addTo(map2);
  //     map.invalidateSize();
  //   }
  // });

  ws.el.addEventListener('ws:slide-change', function(){
    crtDiv = $(".current div");
    if(crtDiv.attr("id") === "mymap"){
      // map.invalidateSize();
      map.fitBounds([
        [3.5288, 31.3403],
        [3.5137, 31.3130]
      ]);
      map.invalidateSize();
    }else if(crtDiv.attr("id") === "mymap2"){
      map2.invalidateSize();
      map2.fitBounds([
        [3.4503, 31.3421],
        [3.4843, 31.4071]
      ]);
    }
  });

  </script>
</body>

</html>
