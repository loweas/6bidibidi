Promise.all([
  d3.csv('assets/poparea.csv')
]).then(function(data) {
  var data__individuals= ["data__individuals"]
  var data__centroid_lat=["data__centroid_lat"]
  var data__centroid_lon=["data__centroid_lat"]

  data[0].forEach(function(d) {
    data__individuals.push(+d["data__individuals"]);
    data__centroid_lat.push(+d["data__centroid_lat"]);
    data__centroid_lon.push(+d["data__centroid_lon"]);
  });

    var color = d3.scaleOrdinal()
      .domain(["A", "B", "C" ])
      .range([ "#402D54", "#D18975", "#8FD175"])


    // Add a scale for bubble size
    var size = d3.scaleLinear()
      .domain([1,100])  // What's in the data
      .range([ 4, 50])  // Size in pixel

    // Add circles:

      .selectAll("myCircles")
      .enter()
      .append("circle")
        .attr("cx", function(d){ return projection([data__centroid_lon, data__centroid_lat])[0] })
        .attr("cy", function(d){ return projection([d.longitude, d.longitude])[1] })
        .attr("r", function(d){ return size(d.size) })


});
